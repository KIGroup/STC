<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="Stc.Utils.UpdateCode">
<Super>%Persistent</Super>
<TimeCreated>63217,78308.778701</TimeCreated>

<UDLText name="T">
<Content><![CDATA[
// do ##class(Stc.Utils.UpdateCode).Upd()

]]></Content>
</UDLText>

<Method name="Upd">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	try{
		TSTART
		
		do ..CreateOrderDirty(5, "Полякова", "Ольга", "Николаевна", "dzolnet@bk.ru", "Неизвестная", "1", "2014-07-23 14:04:14")
		do ..CreateOrderDirty(1, "Полякова", "Ольга", "Николаевна", "dzolnet@bk.ru", "Неизвестная", "1", "2014-07-23 14:04:21")
		do ..CreateOrderDirty(2, "Воронцов", "Дмитирий", "Сергеевич", "ic12dsv@mail.ru", "Неизвестная", "1", "2014-07-23 14:09:24")
	
		do ..CreateOrderApproved("1", "Абильдина", "Кымбат", "", "kymbat.abildina@gmail.com", "", "", "109", "1", "2014-07-03 09:43:09")
		do ..CreateOrderApproved("2", "Салдаев", "Равиль", "", "ravil.m.saldaev@ge.com", "8(915)190-85-46", "", "59", "1", "2014-07-03 09:49:55")
		do ..CreateOrderApproved("3", "Салдаев", "Равиль", "", "ravil.m.saldaev@ge.com", "8(915)190-85-46", "", "59", "1", "2014-07-03 09:49:46")
		do ..CreateOrderApproved("1", "Окунев", "Василий", "", "vokunev@bbtspb.ru", "", "", "113", "1", "2014-07-03 09:48:47")
		do ..CreateOrderApproved("1", "Киреев", "Игорь", "", "kir@abgcard.ru", "", "", "110", "1", "2014-07-03 09:47:58")
		do ..CreateOrderApproved("1", "Пешков", "Егор", "", "egor.peshkov@volkswagen-rus.ru", "7910-590-85-38", "", "114", "2", "2014-07-23 13:07:15")
		do ..CreateOrderApproved("1", "Казаева", "Ольга", "", "057-0890@057.pfr.ru", "", "", "115", "1", "2014-07-23 13:08:08")
		do ..CreateOrderApproved("3", "Козанов", "Павел", "Владимирович", "pavelkozanov@mail.ru", "7-981-181-38-50", "", "116", "1", "2014-07-23 13:10:22")
		do ..CreateOrderApproved("6", "Мартынов", "Александр", "Александрович", "a.martynov64@gmail.com", "+79271144636", "", "101", "1", "2014-07-23 13:10:38")
		do ..CreateOrderApproved("3", "Морозова", "Елена", "Сергеевна", "undef_53bcacf2@no.ne", "", "", "18", "1", "2014-07-23 13:09:20")
		do ..CreateOrderApproved("2", "Смирнов", "Георгий", "Георгиевич", "undef_52af125a@no.ne", "", "", "7", "1", "2014-07-23 14:08:30")
		do ..CreateOrderApproved("3", "Оразбаев", "Серик", "Булатханович", "undef_54b951e6@no.ne", "", "", "28", "1", "2014-07-23 14:07:13")
		do ..CreateOrderApproved("1", "Оразбаев", "Серик", "Булатханович", "undef_54b951e6@no.ne", "", "", "28", "1", "2014-07-23 14:07:02")
		do ..CreateOrderApproved("5", "Оразбаев", "Серик", "Булатханович", "undef_54b951e6@no.ne", "", "", "28", "1", "2014-07-23 14:06:51")
		do ..CreateOrderApproved("2", "Морозова", "Елена", "Сергеевна", "undef_53bcacf2@no.ne", "", "", "18", "1", "2014-07-23 14:03:17")
		do ..CreateOrderApproved("1", "Гержан", "Павел", "Дмитриевич", "p.gerzhan@gmail.com", "", "", "117", "1", "2014-07-23 14:02:10")
		do ..CreateOrderApproved("3", "Вишняков", "Павел", "Валерьевич", "vishnyakov.pavel@me.com", "+7-960-318-09-50", "", "108", "1", "2014-07-23 08:16:42")
		do ..CreateOrderApproved("2", "Ермаков", "Виктор", "Михайлович", "ermakov.victor.mihailovich@gmail.com", "+79191443214", "", "99", "1", "2014-07-27 15:39:06")
		do ..CreateOrderApproved("3", "Васильев", "Сергей", "Владимирович", "vasilev.s@ritek.nov.ru", "+7 911 641-04-41", "", "118", "1", "2014-07-29 06:05:57")
		
		TCOMMIT
	}
	catch(ex){
		TROLLBACK
		
		do $system.OBJ.DisplayError(ex.AsStatus())
	}
]]></Implementation>
</Method>

<Method name="CreateOrderDirty">
<ClassMethod>1</ClassMethod>
<FormalSpec>courseId,lastName,firstName,middleName,email,companyString,studentsNumber,createdTS</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set order = ##class(Stc.Data.Order).%New()
	set order.Course = ##class(Stc.Data.Course).%OpenId(courseId)
	set order.LastName = lastName
	set order.FirstName = firstName
	set order.MiddleName = middleName
	set order.Email = email
	
	set order.CompanyString = companyString
	
	set order.StudentsNumber = studentsNumber
	set order.CreatedTS = createdTS
	w !,order.%Save()
]]></Implementation>
</Method>

<Method name="CreateOrderApproved">
<ClassMethod>1</ClassMethod>
<FormalSpec>courseId,lastName,firstName,middleName,email,companyId,studentsNumber,createdTS</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set order = ##class(Stc.Data.Order).%New()
	set order.Course = ##class(Stc.Data.Course).%OpenId(courseId)
	set order.LastName = lastName
	set order.FirstName = firstName
	set order.MiddleName = middleName
	set order.Email = email
	
	set order.Company = ##class(Stc.Data.Company).%OpenId(companyId)
	set order.StudentsNumber = studentsNumber
	set order.CreatedTS = createdTS
	w !,order.%Save()
]]></Implementation>
</Method>

<Storage name="Default">
<Type>%Library.CacheStorage</Type>
<DataLocation>^Stc.Utils.UpdateCodeD</DataLocation>
<DefaultData>UpdateCodeDefaultData</DefaultData>
<IdLocation>^Stc.Utils.UpdateCodeD</IdLocation>
<IndexLocation>^Stc.Utils.UpdateCodeI</IndexLocation>
<StreamLocation>^Stc.Utils.UpdateCodeS</StreamLocation>
<ExtentSize>100000</ExtentSize>
<Data name="UpdateCodeDefaultData">
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
</Data>
</Storage>
</Class>
</Export>
