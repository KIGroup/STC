<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<CSP name="stc/js/services/CompanySrvc.js" application="/csp/dorabotka/" default="1"><![CDATA[
'use strict';
//dddв

/*===========================================================================================
Компании
===========================================================================================*/

servicesModule.factory('CompanySrvc', function(DALSrvc) {
	
	return {
	    /* Получить короткую информацию о компаниях */
        getAllCompaniesShortInfo: function(){
            return DALSrvc.getPromise('get', StcAppSetting.user + '/json/allCompaniesShortInfo', null);
        },
        /* Получить короткую информацию о компаниях, котроые входят в обучение*/
        getAllCompaniesShortInfoForTraining: function(id){
            return DALSrvc.getPromise('get', StcAppSetting.user + '/json/allCompaniesShortInfo/training/' + id, null);
        },
        /* Получить короткую информацию о компаниях */
        getAllCompaniesFullInfo: function(pageCurr, pageSize, sqlName, isDown, searchSqlName, searchText){
            var first = pageSize * (pageCurr - 1) + 1;
            var obj = {sqlName: sqlName, 
                       isDown: isDown, 
                       first: first, 
                       last: first + pageSize - 1,
                       searchSqlName: searchSqlName, 
                       searchText: searchText};

            return DALSrvc.getPromise('save', StcAppSetting.admin + '/json/allCompaniesFullInfo', obj);
        },
        /* Получить короткую информацию о компаниях */
        getCompany: function(id){
            return DALSrvc.getPromise('get', StcAppSetting.admin + '/json/company/' + id, null);
        },
        /* Сохранить данные компании по коду доступа к заявке */
        saveCompanyByCode: function(company, accessCode){
            return DALSrvc.getPromise('save', StcAppSetting.user + '/json/saveCompany', {company: company, order: {code: accessCode}});
        },
        /* Сохранить компанию из заявки */
        saveCompanyFromOrder: function(company, orderId){
            return DALSrvc.getPromise('save', StcAppSetting.admin + '/json/saveCompanyFromOrder', {company: company, orderId: orderId});
        },
        /* Сохранить компанию из заявки от слушателя*/
        saveCompanyFromOrderNewStudent: function(company, orderId){
            return DALSrvc.getPromise('save', StcAppSetting.admin + '/json/saveCompanyFromOrderNewStudent', {company: company, orderId: orderId});
        },
        /* Сохранить данные компании | создать*/
        saveCompany: function(company){
            return DALSrvc.getPromise('save', StcAppSetting.admin + '/json/saveCompany', company);
        },
        /* Удалить компанию*/
        deleteCompany: function(id){
            return DALSrvc.getPromise('delete', StcAppSetting.admin + '/json/company/'+id, null);
        }

    }
});
  
]]></CSP>
</Export>
