<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<CSP name="stc/partials/updateorder.csp" application="/csp/stc/" default="1"><![CDATA[
<div class="row-fluid" ng-show="ordForm.visible">
	<div class="span1">
	</div>
	<div class="span10">
		<tabset>
    		<tab heading="{{'Заявка'|localize}}">
    			<div class="row-fluid">
					<div class="span6">
						<p><span class="spnTitle" ng-bind="'Компания'|localize"></span>: <span ng-bind="ordForm.order.contact.company.shortName"></span></p>
						<p><span class="spnTitle" ng-bind="'Партнер'|localize" ></span>: <span ng-bind="ordForm.order.contact.partner"></span></p>
						<p><span class="spnTitle" ng-bind="'Контакт'|localize" ></span>: <span ng-bind="ordForm.order.contact.lastName + ' ' + ordForm.order.contact.firstName + ' ' + ordForm.order.contact.middleName"></span></p>
						<p><span class="spnTitle" ng-bind="'Email'"            ></span>: <span ng-bind="ordForm.order.contact.email"></span></p>
						<p><span class="spnTitle" ng-bind="'Телефон'|localize" ></span>: <span ng-bind="ordForm.order.contact.phone"></span></p>
						<p><span class="spnTitle" ng-bind="'Skype'"            ></span>: <span ng-bind="ordForm.order.contact.skype"></span></p>	
					</div>
					<div class="span6">
						<p><span class="spnTitle" ng-bind="'Курс'|localize"                 ></span>: <span ng-bind="ordForm.order.course.name"></span></p>
						<p><span class="spnTitle" ng-bind="'Место обучения'|localize"       ></span>: <span ng-bind="ordForm.order.city.name + ', ' + ordForm.order.city.parentName + ', ' + ordForm.order.city.greatParentName"></span></p>
						<p><span class="spnTitle" ng-bind="'Количество слушателей'|localize"></span>: <span ng-bind="ordForm.studTable.items.length"></span></p>
						<p><span class="spnTitle" ng-bind="'Дата обучения'|localize"        ></span>: <span ng-bind="ordForm.order.date|convertCacheDate:('d MMMM y'|localize)"></span></p>
						<button ng-hide="menu.readOnlyMode" class="btn btn-primary btn-small" ng-show="ordForm.order.status.code=='Approved'" ng-disabled="!formCompany.$valid || !formCompany.$pristine" ng-click="ordForm.finishEditing()" ng-bind="'Завершить редактирование'|localize"></button></br></br>
						<div ng-hide="formCompany.$valid">
							<span class="label label-important" ng-bind="'Не все данные компании заполнены!'|localize"></span>
							</br>
							</br>
						</div>
						<span class="label label-important" ng-show="formCompany.$dirty" ng-bind="'Изменение данных компании не было зафиксировано!'|localize"></span>
					</div>		
				</div>	
    		</tab>
    		<tab heading="{{'Компания'|localize}}">
    			<form name="formCompany" ng-submit="ordForm.saveCompany()">
					<stccompany company="ordForm.order.contact.company" required-all="true" disable-short-name="!menu.admin"/>
					<button ng-hide="menu.readOnlyMode" class="btn btn-primary btn-small" type="submit" ng-disabled="!formCompany.$dirty" ng-bind="'Сохранить'|localize"></button>
				</form>
    		</tab>
    		<tab heading="{{('Слушатели'|localize) + ' (' + ordForm.studTable.itemsTotal + ')'}}" active="ordForm.studTable.active">
    			<stcgrid
				    table-class="table table-bordered table-hover"
				    caption=""
				    columns="ordForm.studTable.columns"
				    items="ordForm.studTable.items"
				    properties="ordForm.studTable.properties"
				    update-items="ordForm.studTable.loadItems(pageCurr, pageSize, sqlName, isDown, searchSqlName, searchText, status)"

				    page-curr="ordForm.studTable.pageCurr"
				    page-total="ordForm.studTable.pageTotal"
				    page-size="ordForm.studTable.pageSize"
				    navigator-visible="true"

				    selectable="true"
				    selected-items="ordForm.studTable.selectedItems"
				    multi-select-mode="ordForm.studTable.multiSelectMode"

				    action-column-visible="ordForm.order.status.code!='Closed' && !menu.readOnlyMode"
				    action-column-icon="'icon-plus-sign'"
				    action-column-title="'Добавить слушателя'|localize"
				    action-column-method="ordForm.studTable.add()"

				    first-row-action-icon="'icon-pencil'"
				    first-row-action-title="'Редактировать слушателя'|localize"
				    first-row-action-method="ordForm.studTable.edit(item)"
				    
				    second-row-action-icon="'icon-remove'"
				    second-row-action-title="'Удалить слушателя'|localize"
				    second-row-action-method="ordForm.studTable.delete(item)"
				    
				    forcibly-update="ordForm.studTable.forciblyUpdate"
				/>		
    		</tab>
    	</tabset>
	</div>
	<div class="span1">
	</div >
</div>
<stcalert data="ordForm.alert" span-right="1" span-middle="10" span-left="1"/>
]]></CSP>
</Export>
