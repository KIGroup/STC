<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<CSP name="stc/partials/training.csp" application="/csp/four/" default="1"><![CDATA[
<div class="row-fluid">
	<div class="span1">
	</div>
	<div class="span10">
 	<tabset>
    	<tab heading="{{'Обучение'|localize}}" select="pageStore.training.tabSgActive=false">
    		<form name="trainingForm" style="margin: 0 0 10px 0;" ng-submit="training.save()">
				<stctraining training="training.data" 
							 form-name="trainingForm" 
							 date-start="training.dateStart" 
							 date-finish="training.dateFinish" 
							 edit-mode="true" 
							 btn-addition-name="training.btnAdditionName|localize" 
							 btn-addition-visible="true" 
							 btn-addition-action="training.btnAdditionAction()"/>
			</form>
		</tab>
    	<tab heading="{{('Подгруппы'|localize) + ' (' + sgroup.itemsTotal + ')'}}" active="pageStore.training.tabSgActive">
    		<stcgrid
			    table-class="table table-bordered table-hover"
			    caption=""
			    columns="sgroup.columns"
			    items="sgroup.items"
			    properties="sgroup.properties"
			    update-items="sgroup.loadItems(pageCurr, pageSize, sqlName, isDown, searchSqlName, searchText)"

			    page-curr="sgroup.pageCurr"
			    page-total="sgroup.pageTotal"
			    page-size="sgroup.pageSize"
			    navigator-visible="true"

			    selectable="true"
			    selected-items="sgroup.selectedItems"
			    multi-select-mode="sgroup.multiSelectMode"

			    action-column-visible="true"
			    action-column-icon="'icon-plus-sign'"
			    action-column-title="'Добавить подгруппу'|localize"
			    action-column-method="sgroup.add()"
			    
			    first-row-action-icon="'icon-remove'"
			    first-row-action-title="'Удалить подгруппу'|localize"
			    first-row-action-method="sgroup.delete(item)"

			    forcibly-update="sgroup.forciblyUpdate"
			/>
    	</tab>
    </tabset>
	</div>
	<div class="span1">
	</div>
</div>

<div class="row-fluid" ng-show="pageStore.training.tabSgActive && sgroup.selectedItems.length!=0">
	<div class="span1">
	</div>
	<div class="span10">
		 <tabset>
			<tab heading="{{'Информация'|localize}}">
				<div class="row-fluid" ng-show="sgroup.items.length==0 || sgroup.selectedItems[0].length==0">
					<i style="margin-left: 33%;" ng-bind="'Выберите подгруппу для отображения подробной информации.'|localize"></i>
				</div>
				<div class="row-fluid" ng-hide="sgroup.items.length==0 || sgroup.selectedItems[0].length==0">
					<div class="span6">
						<p><span class="spnTitle" ng-bind="'Плательщик'|localize"              ></span>: <span ng-bind="sgroup.selectedItems[0].payer.shortName"></span></p>
						<p><span class="spnTitle" ng-bind="'Полное название компании'|localize"></span>: <span ng-bind="sgroup.selectedItems[0].payer.fullName"></span></p>
						<p><span class="spnTitle" ng-bind="'Юридический адрес'|localize"       ></span>: <span ng-bind="sgroup.selectedItems[0].payer.legalAddress"></span></p>
						<p><span class="spnTitle" ng-bind="'Почтовый адрес'|localize"          ></span>: <span ng-bind="sgroup.selectedItems[0].payer.mailAddress"></span></p>
						<p><span class="spnTitle" ng-bind="'Веб-сайт'|localize"                ></span>: <span ng-bind="sgroup.selectedItems[0].payer.site"></span></p>
						</br>
						<p><span class="spnTitle" ng-bind="'Контакт'|localize"></span>: <span ng-bind="sgroup.selectedItems[0].payer.contact.lastName + ' ' + sgroup.selectedItems[0].payer.contact.firstName + ' ' + sgroup.selectedItems[0].payer.contact.middleName"></span></p>
						<p><span class="spnTitle" ng-bind="'Email'"           ></span>: <span ng-bind="sgroup.selectedItems[0].payer.contact.email"></span></p>
						<p><span class="spnTitle" ng-bind="'Телефон'|localize"></span>: <span ng-bind="sgroup.selectedItems[0].payer.contact.phone"></span></p>
						<p><span class="spnTitle" ng-bind="'Skype'"           ></span>: <span ng-bind="sgroup.selectedItems[0].payer.contact.skype"></span></p>
					</div>
					<div class="span6">
						<p>
							<span class="spnTitle" ng-bind="('Сумма платежа'|localize) + ', ' + ('валюта'|localize)"></span>: <span ng-bind="sgroup.selectedItems[0].amount + ', ' + sgroup.selectedItems[0].currency.name"></span>
							<a href="#PaymentModal" role="button" data-toggle="modal" ng-click="sgroup.modalPaymentVisible=true" style="color: rgb(83,83,83); text-decoration: none;" onmouseover="this.style.color='black';" onmouseout="this.style.color='rgb(83,83,83)';" title="{{'Редактировать платеж'|localize}}"> <i class="icon-pencil" style="cursor: pointer;"></i> </a>
						</p>
						<p><span class="spnTitle" ng-bind="'КПП'|localize"  title="{{'Код причины постановки на учёт'|localize}}"                 ></span>: <span ng-bind="sgroup.selectedItems[0].payer.kpp"></span></p>
						<p><span class="spnTitle" ng-bind="'ИНН'|localize"  title="{{'Идентификационный номер налогоплательщика'|localize}}"      ></span>: <span ng-bind="sgroup.selectedItems[0].payer.inn"></span></p>
						<p><span class="spnTitle" ng-bind="'ОГРН'|localize" title="{{'Основной государственный регистрационный номер'|localize}}" ></span>: <span ng-bind="sgroup.selectedItems[0].payer.ogrn"></span></p>
						<p><span class="spnTitle" ng-bind="'Р/С'|localize"  title="{{'Расчётный счёт'|localize}}"                                 ></span>: <span ng-bind="sgroup.selectedItems[0].payer.settlementAccount"></span></p>
						<p><span class="spnTitle" ng-bind="'К/С'|localize"  title="{{'Корреспондентский счёт'|localize}}"                         ></span>: <span ng-bind="sgroup.selectedItems[0].payer.correspondentAccount"></span></p>
						<p><span class="spnTitle" ng-bind="'БИК'|localize"  title="{{'Банковский идентификационный код'|localize}}"               ></span>: <span ng-bind="sgroup.selectedItems[0].payer.bic"></span></p>
						<p><span class="spnTitle" ng-bind="'Другая информация'|localize"    ></span>: <span ng-bind="sgroup.selectedItems[0].payer.otherInfo"></span></p>
					</div>
				</div>
			</tab>
			<tab heading="{{'Договор'|localize}}">
				<form name="sgContractForm" ng-submit="sgroup.saveContract()">
					<div class="row-fluid">
						<div class="span6">
							<div class="control-group">
					    		<label class="control-label" ng-bind="('ФИО подписанта в родительном падеже'|localize) + '*'"></label>
				        		<div class="controls">
			            			<input type="text" class="span12" ng-model="sgroup.contract.fullName" required/>
				        		</div>
							</div>
							<div class="control-group">
					    		<label class="control-label" ng-bind="('Документ основания (устав и прочее)'|localize) + '*'"></label>
				        		<div class="controls">
			            			 <textarea class="span12" rows="3" ng-model="sgroup.contract.document" required></textarea>
				        		</div>
							</div>
						</div>
						<div class="span6">
							<div class="control-group">
					    		<label class="control-label" ng-bind="('Место исполнения'|localize) + '*'"></label>
				        		<div class="controls">
			            			<input disabled type="text" class="span12" value="{{training.data.city.name + ', ' + training.data.city.parentName + ', ' + training.data.city.greatParentName}}" required/>
				        		</div>
							</div>
							<div class="row-fluid">
								<div class="span6">
									<div class="control-group">
								        <label class="control-label" ng-bind="('Дата договора'|localize) + '*'"></label>
								        <div class="controls">
								            <input type="text" class="span12" datepicker-popup="{{'d MMMM y'|localize}}" ng-model="sgroup.dateSt" show-weeks="false" ng-required="true" />
								        </div>
								    </div>			
								</div>
								<div class="span6">
									<div class="control-group">
								        <label class="control-label" ng-bind="('Дата окончания договора'|localize) + '*'"></label>
								        <div class="controls">
								            <input type="text" class="span12" datepicker-popup="{{'d MMMM y'|localize}}" ng-model="sgroup.dateFn" show-weeks="false" ng-required="true" />
								        </div>
								    </div>
								</div>
							</div>
				    		<button type="submit" class="btn btn-success btn-small" ng-bind="'Сохранить'|localize" ng-disabled="sgContractForm.$pristine" ng-click="sgroup.formatData()"></button>
						</div>		
					</div>
				</form>
			</tab>
			<tab heading="{{('Слушатели'|localize) + ' (' + sgroup.selectedItems[0].students.length + ')'}}" active="pageStore.training.tabSgStActive">
				<div class="row-fluid" ng-show="sgroup.items==0 || sgroup.selectedItems[0].length==0">
					<i style="margin-left: 33%;" ng-bind="'Выберите подгруппу для отображения слушателей.'|localize"></i>
				</div>
				<div class="row-fluid" ng-hide="sgroup.items==0 || sgroup.selectedItems[0].length==0">
					<stcgrid
					    table-class="table table-bordered"
					    caption=""
					    columns="student.columns"
					    items="sgroup.selectedItems[0].students"
					    properties="student.properties"
					    update-items=""

					    page-curr="student.pageCurr"
					    page-total="student.pageTotal"
					    page-size="student.pageSize"
					    navigator-visible="false"

					    selectable="false"
					    selected-items="student.selectedItems"
					    multi-select-mode="student.multiSelectMode"

					    action-column-visible="true"
					    action-column-icon="'icon-plus-sign'"
					    action-column-title="'Добавить слушателя'|localize"
					    action-column-method="student.add()"
					    
					    first-row-action-icon="'icon-pencil'"
					    first-row-action-title="'Редактировать слушателя'|localize"
					    first-row-action-method="student.edit(item)"
					    
					    second-row-action-icon="'icon-remove'"
					    second-row-action-title="'Удалить слушателя'|localize"
					    second-row-action-method="student.delete(item)" 
					/>
				</div>
			</tab>
		</tabset>
	</div>
	<div class="span1">
	</div>
</div>
</br>
<stcalert data="other.alert" span-right="1" span-middle="10" span-left="1"/>



 
<div class="modal" id="PaymentModal" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="PaymentModalLabel" aria-hidden="true" ng-show="sgroup.modalPaymentVisible">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="sgroup.cancelPayment()">×</button>
    <h3 id="PaymentModalLabel" ng-bind="'Платеж'|localize"></h3>
  </div>
  <div class="modal-body">
	<form name="sgPaymentForm" style="margin: 0 0 10px 0;" ng-submit="">
		<div class="row-fluid">
			<div class="span6">
				<div class="control-group">
			    <label class="control-label" ng-bind="('Сумма'|localize) + '*'"></label>
			        <div class="controls">
			    		<input type="text" class="span12" ng-model="sgroup.selectedItems[0].amount"/>
			        </div>
			    </div>
			</div>
			<div class="span6">
				<div class="control-group">
				    <label class="control-label" ng-bind="('Валюта'|localize) + '*'"></label>
			        <div class="controls">
		            	<select class="span12" ng-model="sgroup.selectedItems[0].currency.id" ng-options="curr.id as curr.name for curr in sgroup.currencies" required>
		            	</select>
			        </div>
				</div>
			</div>
		</div>
		<button class="btn btn-success" data-dismiss="modal" aria-hidden="true" ng-click="sgroup.savePayment()" ng-disabled="sgPaymentForm.$pristine" ng-bind="'Сохранить'|localize"></button>
		<button class="btn" data-dismiss="modal" aria-hidden="true" ng-click="sgroup.cancelPayment()" ng-bind="'Отмена'|localize"></button>
	</form>
  </div>
</div>


<div class="modal" id="AddSubGroupModal" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="AddSubGroupModalLabel" aria-hidden="true" ng-show="sgroup.modalAddSubGroupVisible">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"  ng-click="sgroup.modalAddSubGroupVisible=false">×</button>
    <h3 id="AddSubGroupModalLabel" ng-bind="'Добавить подгруппу'|localize"></h3>
  </div>
  <div class="modal-body">
	<form style="margin: 0 0 10px 0;" ng-submit="">
		<div class="row-fluid">
			<div class="control-group">
			    <label class="control-label" ng-bind="('Компания - плательщик подгруппы'|localize) + '*'"></label>
		        <div class="controls">
	            	<select class="span12" ng-model="sgroup.newSubGroupPayer" ng-options="comp as comp.name for comp in sgroup.companies" required>
	            	</select>
		        </div>
			</div>
		</div>
		<button class="btn btn-success" data-dismiss="modal" aria-hidden="true" ng-click="sgroup.addSubGroup()" ng-bind="'Добавить'|localize"></button>
		<button class="btn" data-dismiss="modal" aria-hidden="true" ng-click="sgroup.modalAddSubGroupVisible=false" ng-bind="'Отмена'|localize"></button>
	</form>
  </div>
</div>]]></CSP>
</Export>
